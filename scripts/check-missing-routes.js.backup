#!/usr/bin/env node
const fs = require('fs');
const path = require('path');

// Removed console.log

// المسارات المطلوبة للنظام الهجين
const requiredRoutes = [
  '/api/v2/health',
  '/api/hybrid/status',
  '/api/hybrid/sync',
  '/api/hybrid/research',
  '/api/agents/cfo',
  '/api/agents/developer',
  '/api/agents/database',
  '/api/agents/operations',
  '/api/agents/general'
];

// فحص ملف API Server
function checkAPIServer() {
  const serverPath = path.join(__dirname, '..', 'apps', 'api', 'server.js');
  
  if (!/* PERFORMANCE: Consider using async version */ fs.existsSync(serverPath)) {
    // Removed console.log
    return [];
  }
  
  const content = /* PERFORMANCE: Consider using async version */ fs.readFileSync(serverPath, 'utf8');
  const foundRoutes = [];
  
  requiredRoutes.forEach(route => {
    const routePattern = route.replace(/:\w+/g, '\\w+');
    const regex = new RegExp(`['"\`]${routePattern}['"\`]`, 'g');
    
    if (regex.test(content)) {
      foundRoutes.push(route);
      // Removed console.log
    } else {
      // Removed console.log
    }
  });
  
  return foundRoutes;
}

// فحص Gemini Backend
function checkGeminiBackend() {
  const backendPath = path.join(__dirname, '..', 'apps', 'gemini-research-agent', 'main.py');
  
  if (!/* PERFORMANCE: Consider using async version */ fs.existsSync(backendPath)) {
    // Removed console.log
    return [];
  }
  
  const content = /* PERFORMANCE: Consider using async version */ fs.readFileSync(backendPath, 'utf8');
  const pythonRoutes = ['/health', '/research', '/api/hybrid/status', '/api/hybrid/sync'];
  const foundRoutes = [];
  
  pythonRoutes.forEach(route => {
    if (content.includes(`"${route}"`) || content.includes(`'${route}'`)) {
      foundRoutes.push(route);
      // Removed console.log
    } else {
      // Removed console.log
    }
  });
  
  return foundRoutes;
}

// تشغيل الفحص
// Removed console.log
const apiRoutes = checkAPIServer();

// Removed console.log
const pythonRoutes = checkGeminiBackend();

// Removed console.log
// Removed console.log
// Removed console.log

if (apiRoutes.length === requiredRoutes.length && pythonRoutes.length === 4) {
  // Removed console.log
} else {
  // Removed console.log
}