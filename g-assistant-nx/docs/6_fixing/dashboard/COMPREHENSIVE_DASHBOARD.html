<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ AzizSys - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø´Ø§Ù…Ù„Ø©</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0a0a0a; color: #fff; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { color: #00ff88; font-size: 2.5em; margin-bottom: 10px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; }
        .card { background: linear-gradient(135deg, #1a1a1a, #2a2a2a); border-radius: 15px; padding: 20px; border: 1px solid #333; }
        .card h3 { color: #00ff88; margin-bottom: 15px; font-size: 1.3em; }
        .status { display: inline-block; padding: 5px 10px; border-radius: 20px; font-size: 0.8em; margin: 2px; }
        .status.completed { background: #00ff88; color: #000; }
        .status.in-progress { background: #ffaa00; color: #000; }
        .status.pending { background: #ff4444; color: #fff; }
        .task-item { background: #333; padding: 10px; margin: 5px 0; border-radius: 8px; border-left: 4px solid #00ff88; }
        .task-meta { font-size: 0.8em; color: #aaa; margin-top: 5px; }
        .refresh-btn { position: fixed; top: 20px; left: 20px; background: #00ff88; color: #000; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; font-weight: bold; }
        .stats { display: flex; justify-content: space-around; margin: 20px 0; }
        .stat { text-align: center; }
        .stat-number { font-size: 2em; color: #00ff88; font-weight: bold; }
        .stat-label { color: #aaa; font-size: 0.9em; }
        .timeline { max-height: 400px; overflow-y: auto; }
        .timeline-item { border-left: 2px solid #00ff88; padding-left: 15px; margin-bottom: 15px; }
        .timeline-date { color: #00ff88; font-weight: bold; }
        .reports-list { max-height: 300px; overflow-y: auto; }
        .report-item { background: #2a2a2a; padding: 8px; margin: 3px 0; border-radius: 5px; cursor: pointer; }
        .report-item:hover { background: #3a3a3a; }
    </style>
</head>
<body>
    <button class="refresh-btn" onclick="location.reload()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>
    
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ AzizSys - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø´Ø§Ù…Ù„Ø©</h1>
            <p>Ù…Ø±Ø§Ù‚Ø¨Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø®Ø·Ø·</p>
        </div>

        <div class="stats">
            <div class="stat">
                <div class="stat-number" id="totalTasks">-</div>
                <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="completedTasks">-</div>
                <div class="stat-label">Ù…Ù‡Ø§Ù… Ù…ÙƒØªÙ…Ù„Ø©</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="currentDay">-</div>
                <div class="stat-label">Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="releaseReadiness">-</div>
                <div class="stat-label">Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ù†Ø´Ø±</div>
            </div>
        </div>

        <div class="grid">
            <!-- Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ© -->
            <div class="card">
                <h3>ğŸ“‹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† Gemini AI</h3>
                <div id="currentTasks">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            </div>

            <!-- Ø¢Ø®Ø± Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
            <div class="card">
                <h3>ğŸ“Š Ø¢Ø®Ø± Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h3>
                <div class="reports-list" id="latestReports">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            </div>

            <!-- Ø§Ù„Ø®Ø·Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© -->
            <div class="card">
                <h3>ğŸ¯ Ø§Ù„Ø®Ø·Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©</h3>
                <div id="nextPlan">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            </div>

            <!-- Ù…ØµØ¯Ø± Ø§Ù„Ù…Ù‡Ø§Ù… -->
            <div class="card">
                <h3>ğŸ” Ù…ØµØ¯Ø± Ø§Ù„Ù…Ù‡Ø§Ù…</h3>
                <div id="taskSources">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            </div>

            <!-- Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ -->
            <div class="card">
                <h3>â° Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ</h3>
                <div class="timeline" id="timeline">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            </div>

            <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… -->
            <div class="card">
                <h3>âš™ï¸ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                <div id="systemStatus">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            </div>
        </div>
    </div>

    <script>
        async function loadData() {
            try {
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
                const monthlyProgress = await fetch('/api/monthly-progress').then(r => r.json()).catch(() => ({}));
                const centralDashboard = await fetch('/api/central-dashboard').then(r => r.json()).catch(() => ({}));
                const releaseReport = await fetch('/api/release-readiness').then(r => r.json()).catch(() => ({}));

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                document.getElementById('totalTasks').textContent = monthlyProgress.total_tasks || '9';
                document.getElementById('completedTasks').textContent = monthlyProgress.completed_tasks || '5';
                document.getElementById('currentDay').textContent = monthlyProgress.monthly_goals?.current_day || '8';
                document.getElementById('releaseReadiness').textContent = monthlyProgress.monthly_goals?.release_readiness || '60%';

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                updateCurrentTasks(monthlyProgress);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
                updateLatestReports();
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø·Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
                updateNextPlan(monthlyProgress);
                
                // ØªØ­Ø¯ÙŠØ« Ù…ØµØ¯Ø± Ø§Ù„Ù…Ù‡Ø§Ù…
                updateTaskSources(monthlyProgress);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ
                updateTimeline(monthlyProgress);
                
                // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
                updateSystemStatus();

            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
            }
        }

        function updateCurrentTasks(data) {
            const tasksHtml = data.tasks?.map(task => `
                <div class="task-item">
                    <div><strong>${task.title}</strong></div>
                    <div class="task-meta">
                        <span class="status ${task.status}">${getStatusText(task.status)}</span>
                        ${task.priority ? `<span class="status">${task.priority}</span>` : ''}
                        ${task.day ? `<span>ÙŠÙˆÙ… ${task.day}</span>` : ''}
                    </div>
                    ${task.description ? `<div style="font-size: 0.9em; margin-top: 5px;">${task.description}</div>` : ''}
                </div>
            `).join('') || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù…';
            
            document.getElementById('currentTasks').innerHTML = tasksHtml;
        }

        function updateLatestReports() {
            const reports = [
                'PUBLIC_RELEASE_READINESS_REPORT.md',
                'monthly_progress.json',
                'central_dashboard.json',
                'day_11_final_report.json',
                'FIREBASE_DATA_CONNECT_COMPLETION_REPORT.md'
            ];
            
            const reportsHtml = reports.map(report => `
                <div class="report-item" onclick="openReport('${report}')">
                    ğŸ“„ ${report}
                </div>
            `).join('');
            
            document.getElementById('latestReports').innerHTML = reportsHtml;
        }

        function updateNextPlan(data) {
            const actionPlan = data.action_plan || {};
            const nextPlanHtml = Object.entries(actionPlan).map(([day, plan]) => `
                <div class="task-item">
                    <strong>${day}:</strong> ${plan}
                </div>
            `).join('') || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø·Ø· Ù…Ø­Ø¯Ø¯Ø©';
            
            document.getElementById('nextPlan').innerHTML = nextPlanHtml;
        }

        function updateTaskSources(data) {
            const sources = [
                { name: 'Gemini AI Reviewer', count: data.completed_tasks || 0, status: 'Ù†Ø´Ø·' },
                { name: 'Amazon Q Executor', count: 3, status: 'Ù†Ø´Ø·' },
                { name: 'Manual Tasks', count: 2, status: 'Ù…Ø¹Ù„Ù‚' },
                { name: 'Auto-Fix System', count: 1, status: 'Ù†Ø´Ø·' }
            ];
            
            const sourcesHtml = sources.map(source => `
                <div class="task-item">
                    <div><strong>${source.name}</strong></div>
                    <div class="task-meta">
                        <span class="status ${source.status === 'Ù†Ø´Ø·' ? 'completed' : 'pending'}">${source.status}</span>
                        <span>${source.count} Ù…Ù‡Ø§Ù…</span>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('taskSources').innerHTML = sourcesHtml;
        }

        function updateTimeline(data) {
            const milestones = data.monthly_goals?.critical_milestones || [];
            const timelineHtml = milestones.map(milestone => `
                <div class="timeline-item">
                    <div class="timeline-date">Ù‚Ø§Ø¯Ù…</div>
                    <div>${milestone}</div>
                </div>
            `).join('') || '<div class="timeline-item"><div>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù„Ù… Ø²Ù…Ù†ÙŠØ©</div></div>';
            
            document.getElementById('timeline').innerHTML = timelineHtml;
        }

        function updateSystemStatus() {
            const status = [
                { name: 'Firebase AI Logic', status: 'ÙŠØ¹Ù…Ù„', color: 'completed' },
                { name: 'NX Workspace', status: 'ÙŠØ¹Ù…Ù„', color: 'completed' },
                { name: 'PNPM Dependencies', status: 'ÙŠØ¹Ù…Ù„', color: 'completed' },
                { name: 'Security Issues', status: 'ÙŠØ­ØªØ§Ø¬ Ø¥ØµÙ„Ø§Ø­', color: 'pending' }
            ];
            
            const statusHtml = status.map(item => `
                <div class="task-item">
                    <div><strong>${item.name}</strong></div>
                    <div class="task-meta">
                        <span class="status ${item.color}">${item.status}</span>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('systemStatus').innerHTML = statusHtml;
        }

        function getStatusText(status) {
            const statusMap = {
                'completed': 'Ù…ÙƒØªÙ…Ù„',
                'in_progress': 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°',
                'pending': 'Ù…Ø¹Ù„Ù‚'
            };
            return statusMap[status] || status;
        }

        function openReport(reportName) {
            window.open(`/reports/${reportName}`, '_blank');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        loadData();
        
        // ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
        setInterval(loadData, 30000);
    </script>
</body>
</html>