# هيكل المشروع (Project Structure) - مشروع G-Assistant

**الإصدار:** 2.0
**الحالة:** ساري المفعول (يعكس الهيكل الحالي)

---

## 1.0 نظرة عامة

هذا المستند يصف الهيكل الرسمي للمجلدات والملفات في مشروع `g-assistant`. تم تصميم الهيكل باستخدام بادئات رقمية (`10_`, `20_`) لفرض ترتيب منطقي للمكونات من الواجهة إلى النظام. الالتزام بهذا الهيكل إلزامي.

---

## 2.0 الهيكل الرئيسي للمجلدات

```
.g-assistant/
├── 10_ui/                      # واجهة المستخدم (Google Apps Script UI)
├── 20_ai/                      # منطق الذكاء الاصطناعي الأساسي
├── 25_ai_agents/               # وكلاء الذكاء الاصطناعي المتخصصون
├── 30_tools/                   # الأدوات التي تستخدمها الوكلاء
├── 35_accounting/              # وحدات المحاسبة
├── 40_security/                # وحدات الأمان
├── 50_analytics/               # وحدات التحليلات
├── 55_operations/              # وحدات العمليات
├── 70_telemetry/               # جمع بيانات التشخيص والأخطاء
├── 80_api/                     # نقاط النهاية (API Endpoints)
├── 85_tests/                   # ملفات الاختبارات
├── 90_System/                  # وحدات النظام الأساسية
├── config/                     # ملفات التكوين
├── doc/                        # ملفات التوثيق الرسمية (هذا المجلد)
├── updated_docs/               # أرشيف التوثيق (للمراجعة)
├── node_modules/               # اعتماديات npm
├── gemini_fullstack/           # مشروع فرعي متكامل
├── package.json                # تعريف المشروع والاعتماديات
└── ... (ملفات أخرى)
```

---

## 3.0 وصف المجلدات الرئيسية

| المسار | الوصف التفصيلي |
| --- | --- |
| `10_ui/` | يحتوي على كل ما يتعلق بواجهة المستخدم التي تظهر داخل Google Workspace (Sidebar, Dialogs). يشمل ملفات `.js` و `.html` لإدارة التفاعل مع المستخدم. |
| `20_ai/` | يمثل العقل المدبر للنظام. يحتوي على المنسق (Orchestrator)، ومحرك الذكاء الاصطناعي (AI Core) الذي يتصل بـ Gemini، وإدارة الذاكرة والسياق. |
| `25_ai_agents/` | يضم تعريفات الوكلاء المتخصصين (Agents). كل وكيل هو وحدة منطقية مسؤولة عن مجال معين، مثل التحليل المالي أو المساعدة في التطوير. |
| `30_tools/` | يحتوي على الأدوات العملية التي تستدعيها الوكلاء لتنفيذ المهام. كل أداة هي دالة أو مجموعة دوال تقوم بمهمة محددة (e.g., التفاعل مع Google Sheets). |
| `90_System/` | يضم الوحدات الداعمة للنظام بأكمله، مثل معالجة الأحداث (`Triggers`)، إدارة التخزين (`StorageProvider`)، والأنواع المخصصة (`Types`). |
| `config/` | مخصص لملفات التكوين الثابتة (JSON) التي لا تتغير أثناء تشغيل البرنامج، مثل ملفات تعريف الذكاء الاصطناعي أو قوائم الوحدات. |
| `doc/` | **المجلد الرسمي للتوثيق.** يجب أن يحتوي على النسخ النهائية والمعتمدة لجميع مستندات المشروع. |

---

## 4.0 معايير التنظيم والتسمية

- **تنظيم الوحدات:** يتم تجميع الملفات حسب الوظيفة داخل المجلدات ذات البادئات الرقمية. هذا الترتيب يمثل تدفق التحكم من الأعلى (UI) إلى الأدنى (System).
- **تسمية الملفات:** داخل المجلدات، تُستخدم أسماء وصفية (e.g., `5_ai_orchestrator.js`, `1_tools_sheets.js`). البادئات الرقمية داخل المجلدات تساعد في تحديد ترتيب التحميل أو الأهمية.
- **تسمية الاختبارات:** يجب أن يعكس ملف الاختبار اسم الملف الذي يختبره (e.g., `test_orchestrator.js`).

---

## 5.0 إدارة الاعتماديات

- تتم إدارة اعتماديات JavaScript/Node.js عبر ملف `package.json`.
- يتم تحميل وحدات Google Apps Script (`.gs`, `.js`) ضمن المشروع وفقًا للترتيب المحدد في بيئة التطوير.

---

## 6.0 استراتيجية الاختبار

- **اختبارات الوحدة (Unit Tests):** يجب أن توجد في مجلد `85_tests` وتختبر وظيفة كل وحدة على حدة.
- **اختبارات التكامل (Integration Tests):** تختبر التفاعل بين الوحدات المختلفة (e.g., هل يستطيع الوكيل استدعاء الأداة الصحيحة؟).
